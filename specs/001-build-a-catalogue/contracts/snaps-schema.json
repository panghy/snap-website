{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://snaps.dev/schemas/catalogue/v1.0.0",
  "title": "SNAPs Catalogue Data",
  "description": "Schema for the SNAPs catalogue data file",
  "type": "object",
  "required": ["version", "lastUpdated", "snaps", "specifications"],
  "properties": {
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Schema version in semantic versioning format"
    },
    "lastUpdated": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of last update"
    },
    "snaps": {
      "type": "array",
      "description": "List of SNAP implementations",
      "items": {
        "$ref": "#/definitions/snapEntry"
      }
    },
    "specifications": {
      "type": "array",
      "description": "List of SNAP specifications",
      "items": {
        "$ref": "#/definitions/snapSpecification"
      }
    }
  },
  "definitions": {
    "snapEntry": {
      "type": "object",
      "required": ["id", "name", "description", "category", "repository", "languages"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z0-9-]+$",
          "description": "Unique identifier for the SNAP"
        },
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 50,
          "description": "Display name of the SNAP"
        },
        "description": {
          "type": "string",
          "minLength": 10,
          "maxLength": 200,
          "description": "Brief description of the SNAP"
        },
        "category": {
          "$ref": "#/definitions/snapCategory"
        },
        "repository": {
          "type": "string",
          "format": "uri",
          "pattern": "^https://github\\.com/[\\w-]+/[\\w.-]+$",
          "description": "GitHub repository URL"
        },
        "specificationRepository": {
          "type": "string",
          "format": "uri",
          "pattern": "^https://github\\.com/[\\w-]+/[\\w.-]+$",
          "description": "Optional specification repository URL"
        },
        "specificationId": {
          "type": "string",
          "pattern": "^[a-z0-9-]+$",
          "description": "Reference to specification being implemented"
        },
        "languages": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "string",
            "enum": ["Java", "Python", "Go", "Rust", "C++", "C#", "JavaScript", "TypeScript", "Ruby", "Swift", "Kotlin", "Scala", "Elixir", "Other"]
          },
          "description": "Supported programming languages"
        },
        "capabilities": {
          "$ref": "#/definitions/snapCapabilities"
        },
        "platforms": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/platformRequirement"
          },
          "description": "Platform and runtime requirements"
        },
        "specificationVersion": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "description": "Version of the SNAP specification this implements"
        },
        "maintainers": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^@?[\\w-]+$"
          },
          "description": "GitHub usernames of maintainers"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[a-z0-9-]+$"
          },
          "description": "Additional searchable tags"
        },
        "archived": {
          "type": "boolean",
          "default": false,
          "description": "Whether this SNAP is archived/deprecated"
        },
        "beta": {
          "type": "boolean",
          "default": false,
          "description": "Whether this SNAP is in beta/experimental stage"
        }
      }
    },
    "snapSpecification": {
      "type": "object",
      "required": ["id", "name", "description", "repository", "version"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^spec-[a-z0-9-]+$",
          "description": "Unique identifier for the specification"
        },
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 50,
          "description": "Name of the specification"
        },
        "description": {
          "type": "string",
          "minLength": 10,
          "maxLength": 200,
          "description": "What this specification defines"
        },
        "repository": {
          "type": "string",
          "format": "uri",
          "pattern": "^https://github\\.com/[\\w-]+/[\\w.-]+$",
          "description": "GitHub repository with specification documentation"
        },
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "description": "Current version of the specification"
        },
        "implementations": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[a-z0-9-]+$"
          },
          "description": "IDs of SNAPs that implement this specification"
        }
      }
    },
    "snapCategory": {
      "type": "string",
      "enum": ["queue", "blobstore", "search", "graph", "timeseries", "cache", "pubsub", "workflow", "other"],
      "description": "Category of SNAP functionality"
    },
    "snapCapabilities": {
      "type": "object",
      "properties": {
        "otelMetrics": {
          "type": "boolean",
          "description": "OpenTelemetry metrics support"
        },
        "otelTracing": {
          "type": "boolean",
          "description": "OpenTelemetry distributed tracing support"
        },
        "multiTenancy": {
          "type": "boolean",
          "description": "Built-in multi-tenant isolation"
        },
        "encryption": {
          "type": "boolean",
          "description": "At-rest encryption support"
        },
        "compression": {
          "type": "boolean",
          "description": "Data compression support"
        },
        "streaming": {
          "type": "boolean",
          "description": "Stream processing capabilities"
        },
        "batchOperations": {
          "type": "boolean",
          "description": "Batch API support"
        },
        "asyncApi": {
          "type": "boolean",
          "description": "Asynchronous operations support"
        }
      },
      "additionalProperties": false
    },
    "platformRequirement": {
      "type": "object",
      "required": ["type", "name", "version"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["language", "foundationdb", "os", "library"],
          "description": "Type of platform requirement"
        },
        "name": {
          "type": "string",
          "description": "Name of the platform/runtime"
        },
        "version": {
          "type": "string",
          "description": "Minimum version required"
        }
      }
    }
  }
}